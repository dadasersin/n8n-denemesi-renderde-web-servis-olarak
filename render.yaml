services:
  - type: web
    name: n8n-optimized
    env: docker
    plan: free
    region: frankfurt
    dockerContext: .
    dockerfilePath: Dockerfile.n8n
    envVars:
      - key: N8N_PORT
        value: 10000
      - key: N8N_ENFORCE_SETTINGS_FILE_PERMISSIONS
        value: "false"
      - key: WEBHOOK_URL
        fromContext: instanceUrl
      - key: N8N_ENCRYPTION_KEY
        generateValue: true
      # PostgreSQL (Supabase) Settings - Add these in Render Dashboard for stability
      - key: DB_TYPE
        value: postgresdb
      - key: DB_POSTGRESDB_PORT
        value: 5432
      - key: DB_POSTGRESDB_HOST
        placeholder: "db.xxxx.supabase.co"
      - key: DB_POSTGRESDB_DATABASE
        value: postgres
      - key: DB_POSTGRESDB_USER
        value: postgres
      - key: DB_POSTGRESDB_PASSWORD
        placeholder: "Your Supabase DB Password"
